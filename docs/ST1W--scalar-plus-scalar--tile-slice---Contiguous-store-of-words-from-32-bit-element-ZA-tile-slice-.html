<html>
 <head>  <link rel="stylesheet" href="../def-style.css"></head> 
 <body> 
  <h2>ST1W (scalar plus scalar, tile slice)</h2> 
  <p>Contiguous store of words from 32-bit element ZA tile slice</p> 
  <p>The slice number within the tile is selected by the sum of the slice index register and immediate offset, modulo the number of 32-bit elements in a vector. The immediate offset is in the range 0 to 3. The memory address is generated by a 64-bit scalar base and an optional 64-bit scalar offset which is multiplied by 4 and added to the base address. Inactive elements are not written to memory.</p> 
  <h3><a id="iclass_mortlach"></a>SME<span><br></br>(FEAT_SME) </span></h3> 
  <p></p> 
  <div> 
   <table> 
    <thead> 
     <tr> 
      <td>31</td> 
      <td>30</td> 
      <td>29</td> 
      <td>28</td> 
      <td>27</td> 
      <td>26</td> 
      <td>25</td> 
      <td>24</td> 
      <td>23</td> 
      <td>22</td> 
      <td>21</td> 
      <td>20</td> 
      <td>19</td> 
      <td>18</td> 
      <td>17</td> 
      <td>16</td> 
      <td>15</td> 
      <td>14</td> 
      <td>13</td> 
      <td>12</td> 
      <td>11</td> 
      <td>10</td> 
      <td>9</td> 
      <td>8</td> 
      <td>7</td> 
      <td>6</td> 
      <td>5</td> 
      <td>4</td> 
      <td>3</td> 
      <td>2</td> 
      <td>1</td> 
      <td>0</td> 
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td>1</td> 
      <td>1</td> 
      <td>1</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td>1</td> 
      <td colspan="5">Rm</td> 
      <td>V</td> 
      <td colspan="2">Rs</td> 
      <td colspan="3">Pg</td> 
      <td colspan="5">Rn</td> 
      <td>0</td> 
      <td colspan="2">ZAt</td> 
      <td colspan="2">off2</td> 
     </tr> 
     <tr> 
      <td colspan="8"></td> 
      <td>msz&lt;1&gt;</td> 
      <td>msz&lt;0&gt;</td> 
      <td></td> 
      <td colspan="5"></td> 
      <td></td> 
      <td colspan="2"></td> 
      <td colspan="3"></td> 
      <td colspan="5"></td> 
      <td></td> 
      <td colspan="2"></td> 
      <td colspan="2"></td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div> 
   <h4></h4> 
   <a id="st1w_za_p_rrr_"></a> 
   <p>ST1W { <a title="ZA tile ZA0-ZA3 to be accessed (field &quot;ZAt&quot;)" class="document-topic">&lt;ZAt&gt;</a><a title="Horizontal or vertical slice indicator (field &quot;V&quot;) [H,V]" class="document-topic">&lt;HV&gt;</a>.S[<a title="32-bit slice index register W12-W15 (field &quot;Rs&quot;)" class="document-topic">&lt;Ws&gt;</a>, <a title="Slice index offset [0-3] (field &quot;off2&quot;)" class="document-topic">&lt;offs&gt;</a>] }, <a title="Governing scalable predicate register P0-P7 (field &quot;Pg&quot;)" class="document-topic">&lt;Pg&gt;</a>, [<a title="64-bit general-purpose base register or SP (field &quot;Rn&quot;)" class="document-topic">&lt;Xn|SP&gt;</a>{, <a title="Optional 64-bit general-purpose offset register, default XZR (field &quot;Rm&quot;)" class="document-topic">&lt;Xm&gt;</a>, LSL #2}]</p> 
  </div> 
  <pre>if !<a title="function: boolean HaveSME()" class="document-topic">HaveSME</a>() then UNDEFINED;
integer n = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rn);
integer m = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rm);
integer g = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>('0':Pg);
integer s = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>('011':Rs);
integer t = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(ZAt);
integer offset = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(off2);
constant integer esize = 32;
boolean vertical = V == '1';</pre> 
  <div></div> 
  <h3>Assembler Symbols</h3> 
  <div> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;ZAt&gt;</td> 
      <td><a id="sa_zat"></a> <p>Is the name of the ZA tile ZA0-ZA3 to be accessed, encoded in the "ZAt" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;HV&gt;</td> 
      <td><a id="sa_hv"></a> <p>Is the horizontal or vertical slice indicator, encoded in <q>V</q>: </p> 
       <table> 
        <thead> 
         <tr> 
          <th>V</th> 
          <th>&lt;HV&gt;</th> 
         </tr> 
        </thead> 
        <tbody> 
         <tr> 
          <td>0</td> 
          <td>H</td> 
         </tr> 
         <tr> 
          <td>1</td> 
          <td>V</td> 
         </tr> 
        </tbody> 
       </table> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Ws&gt;</td> 
      <td><a id="sa_ws"></a> <p>Is the 32-bit name of the slice index register W12-W15, encoded in the "Rs" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;offs&gt;</td> 
      <td><a id="sa_offs"></a> <p>Is the slice index offset, in the range 0 to 3, encoded in the "off2" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Pg&gt;</td> 
      <td><a id="sa_pg"></a> <p>Is the name of the governing scalable predicate register P0-P7, encoded in the "Pg" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Xn|SP&gt;</td> 
      <td><a id="sa_xn_sp"></a> <p>Is the 64-bit name of the general-purpose base register or stack pointer, encoded in the "Rn" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Xm&gt;</td> 
      <td><a id="sa_xm"></a> <p>Is the optional 64-bit name of the general-purpose offset register, defaulting to XZR, encoded in the "Rm" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div></div> 
  <div> 
   <a id="execute"></a> 
   <h3>Operation</h3> 
   <pre><a title="function: CheckStreamingSVEAndZAEnabled()" class="document-topic">CheckStreamingSVEAndZAEnabled</a>();
constant integer VL = <a title="accessor: integer CurrentVL" class="document-topic">CurrentVL</a>;
constant integer PL = VL DIV 8;
constant integer dim = VL DIV esize;
bits(64) base;
bits(64) addr;
bits(PL) mask = <a title="accessor: bits(width) P[integer n, integer width]" class="document-topic">P</a>[g, PL];
bits(64) moffs = <a title="accessor: bits(width) X[integer n, integer width]" class="document-topic">X</a>[m, 64];
bits(32) index = <a title="accessor: bits(width) X[integer n, integer width]" class="document-topic">X</a>[s, 32];
integer  slice = (<a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(index) + offset) MOD dim;
bits(VL) src;
constant integer mbytes = esize DIV 8;
boolean  contiguous = TRUE;
boolean  nontemporal = FALSE;
boolean  tagchecked = TRUE;
<a title="type AccessDescriptor is ( AccessType acctype, bits(2) el, SecurityState ss, boolean acqsc, boolean acqpc, boolean relsc, boolean limitedordered, boolean exclusive, boolean atomicop, MemAtomicOp modop, boolean nontemporal, boolean read, boolean write, CacheOp cacheop, CacheOpScope opscope, CacheType cachetype, boolean pan, boolean transactional, boolean nonfault, boolean firstfault, boolean first, boolean contiguous, boolean streamingsve, boolean ls64, boolean mops, boolean rcw, boolean rcws, boolean toplevel, VARange varange, boolean a32lsmd, boolean tagchecked, boolean tagaccess, MPAMinfo mpam )" class="document-topic">AccessDescriptor</a> accdesc = <a title="function: AccessDescriptor CreateAccDescSME(MemOp memop, boolean nontemporal, boolean contiguous, boolean tagchecked)" class="document-topic">CreateAccDescSME</a>(<a title="enumeration MemOp {MemOp_LOAD, MemOp_STORE, MemOp_PREFETCH}" class="document-topic">MemOp_STORE</a>, nontemporal, contiguous, tagchecked);

if n == 31 then
    if <a title="function: boolean AnyActiveElement(bits(N) mask, integer esize)" class="document-topic">AnyActiveElement</a>(mask, esize) ||
          <a title="function: boolean ConstrainUnpredictableBool(Unpredictable which)" class="document-topic">ConstrainUnpredictableBool</a>(<a title="enumeration Unpredictable {  Unpredictable_VMSR,  Unpredictable_WBOVERLAPLD,  Unpredictable_WBOVERLAPST,  Unpredictable_LDPOVERLAP,  Unpredictable_BASEOVERLAP,  Unpredictable_DATAOVERLAP,  Unpredictable_DEVPAGE2,  Unpredictable_INSTRDEVICE,  Unpredictable_RESCPACR,  Unpredictable_RESMAIR,  Unpredictable_S1CTAGGED,  Unpredictable_S2RESMEMATTR,  Unpredictable_RESTEXCB,  Unpredictable_RESPRRR,  Unpredictable_RESDACR,  Unpredictable_RESVTCRS,  Unpredictable_RESTnSZ,  Unpredictable_RESTCF,  Unpredictable_DEVICETAGSTORE,  Unpredictable_OORTnSZ,  Unpredictable_LARGEIPA,  Unpredictable_ESRCONDPASS,  Unpredictable_ILZEROIT,  Unpredictable_ILZEROT,  Unpredictable_BPVECTORCATCHPRI,  Unpredictable_VCMATCHHALF,   Unpredictable_VCMATCHDAPA,  Unpredictable_WPMASKANDBAS,  Unpredictable_WPBASCONTIGUOUS,  Unpredictable_RESWPMASK,  Unpredictable_WPMASKEDBITS,  Unpredictable_RESBPWPCTRL,  Unpredictable_BPNOTIMPL,  Unpredictable_RESBPTYPE,  Unpredictable_BPNOTCTXCMP,  Unpredictable_BPMATCHHALF,  Unpredictable_BPMISMATCHHALF,  Unpredictable_RESTARTALIGNPC,  Unpredictable_RESTARTZEROUPPERPC,  Unpredictable_ZEROUPPER,   Unpredictable_ERETZEROUPPERPC,   Unpredictable_A32FORCEALIGNPC,  Unpredictable_SMD,  Unpredictable_NONFAULT,  Unpredictable_SVEZEROUPPER,  Unpredictable_SVELDNFDATA,  Unpredictable_SVELDNFZERO,  Unpredictable_CHECKSPNONEACTIVE,  Unpredictable_SMEZEROUPPER,  Unpredictable_NVNV1,  Unpredictable_Shareability,  Unpredictable_AFUPDATE,  Unpredictable_DBUPDATE,  Unpredictable_IESBinDebug,  Unpredictable_BADPMSFCR,  Unpredictable_ZEROBTYPE,  Unpredictable_EL2TIMESTAMP, Unpredictable_EL1TIMESTAMP,  Unpredictable_RESERVEDNSxB,  Unpredictable_WFxTDEBUG,  Unpredictable_LS64UNSUPPORTED,   Unpredictable_MISALIGNEDATOMIC,  Unpredictable_CLEARERRITEZERO,   Unpredictable_ALUEXCEPTIONRETURN,  Unpredictable_IGNORETRAPINDEBUG,  Unpredictable_DBGxVR_RESS,  Unpredictable_PMUEVENTCOUNTER,  Unpredictable_PMSCR_PCT,   Unpredictable_CounterReservedForEL2,  Unpredictable_BRBFILTRATE,   Unpredictable_MOPSOVERLAP31,  Unpredictable_STOREONLYTAGCHECKEDCAS,  Unpredictable_RESTC }" class="document-topic">Unpredictable_CHECKSPNONEACTIVE</a>) then
        <a title="function: CheckSPAlignment()" class="document-topic">CheckSPAlignment</a>();
    base = <a title="accessor: bits(64) SP[]" class="document-topic">SP</a>[];
else
    base = <a title="accessor: bits(width) X[integer n, integer width]" class="document-topic">X</a>[n, 64];

src = <a title="accessor: bits(width) ZAslice[integer tile, integer esize, boolean vertical, integer slice, integer width]" class="document-topic">ZAslice</a>[t, esize, vertical, slice, VL];
for e = 0 to dim-1
    addr = base + <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(moffs) * mbytes;
    if <a title="function: boolean ActivePredicateElement(bits(N) pred, integer e, integer esize)" class="document-topic">ActivePredicateElement</a>(mask, e, esize) then
        Mem[addr, mbytes, accdesc] = <a title="accessor: bits(size) Elem[bits(N) vector, integer e, integer size]" class="document-topic">Elem</a>[src, e, esize];
    moffs = moffs + 1;</pre> 
  </div>  
 </body>
</html>