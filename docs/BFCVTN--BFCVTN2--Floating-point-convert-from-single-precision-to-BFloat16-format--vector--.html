<html>
 <head>  <link rel="stylesheet" href="../def-style.css"></head> 
 <body> 
  <h2>BFCVTN, BFCVTN2</h2> 
  <p>Floating-point convert from single-precision to BFloat16 format (vector) reads each single-precision element in the SIMD&amp;FP source vector, converts each value to BFloat16 format, and writes the results in the lower or upper half of the SIMD&amp;FP destination vector. The result elements are half the width of the source elements.</p> 
  <p>The BFCVTN instruction writes the half-width results to the lower half of the destination vector and clears the upper half to zero, while the BFCVTN2 instruction writes the results to the upper half of the destination vector without affecting the other bits in the register.</p> 
  <h3><a id="iclass_simd_single_and_bf16"></a>Vector single-precision to BFloat16<span><br></br>(FEAT_BF16) </span></h3> 
  <p></p> 
  <div> 
   <table> 
    <thead> 
     <tr> 
      <td>31</td> 
      <td>30</td> 
      <td>29</td> 
      <td>28</td> 
      <td>27</td> 
      <td>26</td> 
      <td>25</td> 
      <td>24</td> 
      <td>23</td> 
      <td>22</td> 
      <td>21</td> 
      <td>20</td> 
      <td>19</td> 
      <td>18</td> 
      <td>17</td> 
      <td>16</td> 
      <td>15</td> 
      <td>14</td> 
      <td>13</td> 
      <td>12</td> 
      <td>11</td> 
      <td>10</td> 
      <td>9</td> 
      <td>8</td> 
      <td>7</td> 
      <td>6</td> 
      <td>5</td> 
      <td>4</td> 
      <td>3</td> 
      <td>2</td> 
      <td>1</td> 
      <td>0</td> 
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td>0</td> 
      <td>Q</td> 
      <td>0</td> 
      <td>0</td> 
      <td>1</td> 
      <td>1</td> 
      <td>1</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td>1</td> 
      <td>1</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td colspan="5">Rn</td> 
      <td colspan="5">Rd</td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div> 
   <h4></h4> 
   <a id="BFCVTN_asimdmisc_4S"></a> 
   <p>BFCVTN<a title="Second and upper half specifier (field &quot;Q&quot;)" class="document-topic">{2}</a> <a title="SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Vd&gt;</a>.<a title="Arrangement specifier (field &quot;Q&quot;) [4H,8H]" class="document-topic">&lt;Ta&gt;</a>, <a title="SIMD&amp;FP source register (field &quot;Rn&quot;)" class="document-topic">&lt;Vn&gt;</a>.4S</p> 
  </div> 
  <pre>if !<a title="function: boolean HaveBF16Ext()" class="document-topic">HaveBF16Ext</a>() then UNDEFINED;
integer n = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rn);
integer d = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rd);
integer part = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Q);
integer elements = 64 DIV 16;</pre> 
  <div></div> 
  <h3>Assembler Symbols</h3> 
  <div> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>2</td> 
      <td><a id="sa_2"></a> <p>Is the second and upper half specifier. If present it causes the operation to be performed on the upper 64 bits of the registers holding the narrower elements, and is encoded in <q>Q</q>: </p> 
       <table> 
        <thead> 
         <tr> 
          <th>Q</th> 
          <th>2</th> 
         </tr> 
        </thead> 
        <tbody> 
         <tr> 
          <td>0</td> 
          <td>[absent]</td> 
         </tr> 
         <tr> 
          <td>1</td> 
          <td>[present]</td> 
         </tr> 
        </tbody> 
       </table> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Vd&gt;</td> 
      <td><a id="sa_vd"></a> <p>Is the name of the SIMD&amp;FP destination register, encoded in the "Rd" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Ta&gt;</td> 
      <td><a id="sa_ta"></a> <p>Is an arrangement specifier, encoded in <q>Q</q>: </p> 
       <table> 
        <thead> 
         <tr> 
          <th>Q</th> 
          <th>&lt;Ta&gt;</th> 
         </tr> 
        </thead> 
        <tbody> 
         <tr> 
          <td>0</td> 
          <td>4H</td> 
         </tr> 
         <tr> 
          <td>1</td> 
          <td>8H</td> 
         </tr> 
        </tbody> 
       </table> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Vn&gt;</td> 
      <td><a id="sa_vn"></a> <p>Is the name of the SIMD&amp;FP source register, encoded in the "Rn" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div></div> 
  <div> 
   <a id="execute"></a> 
   <h3>Operation</h3> 
   <pre><a title="function: CheckFPAdvSIMDEnabled64()" class="document-topic">CheckFPAdvSIMDEnabled64</a>();
bits(128) operand = <a title="accessor: bits(width) V[integer n, integer width]" class="document-topic">V</a>[n, 128];
bits(64) result;

for e = 0 to elements-1
    <a title="accessor: Elem[bits(N) &amp;vector, integer e, integer size] = bits(size) value" class="document-topic">Elem</a>[result, e, 16] = <a title="function: bits(16) FPConvertBF(bits(32) op, FPCRType fpcr)" class="document-topic">FPConvertBF</a>(<a title="accessor: bits(size) Elem[bits(N) vector, integer e, integer size]" class="document-topic">Elem</a>[operand, e, 32], FPCR[]);

<a title="accessor: Vpart[integer n, integer part, integer width] = bits(width) value" class="document-topic">Vpart</a>[d, part, 64] = result;</pre> 
  </div>  
 </body>
</html>