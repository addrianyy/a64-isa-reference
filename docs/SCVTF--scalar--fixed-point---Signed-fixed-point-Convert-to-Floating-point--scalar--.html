<html>
 <head>  <link rel="stylesheet" href="../def-style.css"></head> 
 <body> 
  <h2>SCVTF (scalar, fixed-point)</h2> 
  <p>Signed fixed-point Convert to Floating-point (scalar). This instruction converts the signed value in the 32-bit or 64-bit general-purpose source register to a floating-point value using the rounding mode that is specified by the <em>FPCR</em>, and writes the result to the SIMD&amp;FP destination register.</p> 
  <p>A floating-point exception can be generated by this instruction. Depending on the settings in <em>FPCR</em>, the exception results in either a flag being set in <em>FPSR</em>, or a synchronous exception being generated. For more information, see <em>Floating-point exception traps</em>.</p> 
  <p>Depending on the settings in the <em>CPACR_EL1</em>, <em>CPTR_EL2</em>, and <em>CPTR_EL3</em> registers, and the Security state and Exception level in which the instruction is executed, an attempt to execute the instruction might be trapped.</p> 
  <p></p> 
  <div> 
   <table> 
    <thead> 
     <tr> 
      <td>31</td> 
      <td>30</td> 
      <td>29</td> 
      <td>28</td> 
      <td>27</td> 
      <td>26</td> 
      <td>25</td> 
      <td>24</td> 
      <td>23</td> 
      <td>22</td> 
      <td>21</td> 
      <td>20</td> 
      <td>19</td> 
      <td>18</td> 
      <td>17</td> 
      <td>16</td> 
      <td>15</td> 
      <td>14</td> 
      <td>13</td> 
      <td>12</td> 
      <td>11</td> 
      <td>10</td> 
      <td>9</td> 
      <td>8</td> 
      <td>7</td> 
      <td>6</td> 
      <td>5</td> 
      <td>4</td> 
      <td>3</td> 
      <td>2</td> 
      <td>1</td> 
      <td>0</td> 
     </tr> 
    </thead> 
    <tbody> 
     <tr> 
      <td>sf</td> 
      <td>0</td> 
      <td>0</td> 
      <td>1</td> 
      <td>1</td> 
      <td>1</td> 
      <td>1</td> 
      <td>0</td> 
      <td colspan="2">ftype</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>0</td> 
      <td>1</td> 
      <td>0</td> 
      <td colspan="6">scale</td> 
      <td colspan="5">Rn</td> 
      <td colspan="5">Rd</td> 
     </tr> 
     <tr> 
      <td></td> 
      <td></td> 
      <td></td> 
      <td colspan="5"></td> 
      <td colspan="2"></td> 
      <td></td> 
      <td colspan="2">rmode</td> 
      <td colspan="3">opcode</td> 
      <td colspan="6"></td> 
      <td colspan="5"></td> 
      <td colspan="5"></td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div> 
   <h4>32-bit to half-precision<span> (sf == 0 &amp;&amp; ftype == 11)</span><span><br></br>(FEAT_FP16) </span></h4> 
   <a id="SCVTF_H32_float2fix"></a> 
   <p>SCVTF <a title="16-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Hd&gt;</a>, <a title="32-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Wn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-32] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <div> 
   <h4>32-bit to single-precision<span> (sf == 0 &amp;&amp; ftype == 00)</span></h4> 
   <a id="SCVTF_S32_float2fix"></a> 
   <p>SCVTF <a title="32-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Sd&gt;</a>, <a title="32-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Wn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-32] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <div> 
   <h4>32-bit to double-precision<span> (sf == 0 &amp;&amp; ftype == 01)</span></h4> 
   <a id="SCVTF_D32_float2fix"></a> 
   <p>SCVTF <a title="64-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Dd&gt;</a>, <a title="32-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Wn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-32] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <div> 
   <h4>64-bit to half-precision<span> (sf == 1 &amp;&amp; ftype == 11)</span><span><br></br>(FEAT_FP16) </span></h4> 
   <a id="SCVTF_H64_float2fix"></a> 
   <p>SCVTF <a title="16-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Hd&gt;</a>, <a title="64-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Xn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-64] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <div> 
   <h4>64-bit to single-precision<span> (sf == 1 &amp;&amp; ftype == 00)</span></h4> 
   <a id="SCVTF_S64_float2fix"></a> 
   <p>SCVTF <a title="32-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Sd&gt;</a>, <a title="64-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Xn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-64] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <div> 
   <h4>64-bit to double-precision<span> (sf == 1 &amp;&amp; ftype == 01)</span></h4> 
   <a id="SCVTF_D64_float2fix"></a> 
   <p>SCVTF <a title="64-bit SIMD&amp;FP destination register (field &quot;Rd&quot;)" class="document-topic">&lt;Dd&gt;</a>, <a title="64-bit general-purpose source register (field &quot;Rn&quot;)" class="document-topic">&lt;Xn&gt;</a>, #<a title="Number of bits after the binary point in the fixed-point source [1-64] (field scale)" class="document-topic">&lt;fbits&gt;</a></p> 
  </div> 
  <pre>integer d = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rd);
integer n = <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(Rn);

integer intsize = if sf == '1' then 64 else 32;
integer fltsize;
<a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp</a> op;
<a title="enumeration FPRounding  {FPRounding_TIEEVEN, FPRounding_POSINF, FPRounding_NEGINF,  FPRounding_ZERO, FPRounding_TIEAWAY, FPRounding_ODD}" class="document-topic">FPRounding</a> rounding;
boolean unsigned;

case ftype of
    when '00' fltsize = 32;
    when '01' fltsize = 64;
    when '10' UNDEFINED;
    when '11'
        if <a title="function: boolean HaveFP16Ext()" class="document-topic">HaveFP16Ext</a>() then
            fltsize = 16;
        else
            UNDEFINED;

if sf == '0' &amp;&amp; scale&lt;5&gt; == '0' then UNDEFINED;
integer fracbits = 64 - <a title="function: integer UInt(bits(N) x)" class="document-topic">UInt</a>(scale);

case opcode&lt;2:1&gt;:rmode of
    when '00 11'        // FCVTZ
        rounding = <a title="enumeration FPRounding  {FPRounding_TIEEVEN, FPRounding_POSINF, FPRounding_NEGINF,  FPRounding_ZERO, FPRounding_TIEAWAY, FPRounding_ODD}" class="document-topic">FPRounding_ZERO</a>;
        unsigned = (opcode&lt;0&gt; == '1');
        op = <a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp_CVT_FtoI</a>;
    when '01 00'        // [US]CVTF
        rounding = <a title="function: FPRounding FPRoundingMode(FPCRType fpcr)" class="document-topic">FPRoundingMode</a>(FPCR[]);
        unsigned = (opcode&lt;0&gt; == '1');
        op = <a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp_CVT_ItoF</a>;
    otherwise
        UNDEFINED;</pre> 
  <div></div> 
  <h3>Assembler Symbols</h3> 
  <div> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Dd&gt;</td> 
      <td><a id="sa_dd"></a> <p>Is the 64-bit name of the SIMD&amp;FP destination register, encoded in the "Rd" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Hd&gt;</td> 
      <td><a id="sa_hd"></a> <p>Is the 16-bit name of the SIMD&amp;FP destination register, encoded in the "Rd" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Sd&gt;</td> 
      <td><a id="sa_sd"></a> <p>Is the 32-bit name of the SIMD&amp;FP destination register, encoded in the "Rd" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Xn&gt;</td> 
      <td><a id="sa_xn"></a> <p>Is the 64-bit name of the general-purpose source register, encoded in the "Rn" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;Wn&gt;</td> 
      <td><a id="sa_wn"></a> <p>Is the 32-bit name of the general-purpose source register, encoded in the "Rn" field.</p> </td> 
     </tr> 
    </tbody> 
   </table> 
   <table> 
    <colgroup> 
     <col></col> 
     <col></col> 
    </colgroup> 
    <tbody> 
     <tr> 
      <td>&lt;fbits&gt;</td> 
      <td><a id="sa_fbits"></a> <p>For the 32-bit to double-precision, 32-bit to half-precision and 32-bit to single-precision variant: is the number of bits after the binary point in the fixed-point source, in the range 1 to 32, encoded as 64 minus "scale".</p> </td> 
     </tr> 
     <tr> 
      <td></td> 
      <td><a id="sa_fbits_1"></a> <p>For the 64-bit to double-precision, 64-bit to half-precision and 64-bit to single-precision variant: is the number of bits after the binary point in the fixed-point source, in the range 1 to 64, encoded as 64 minus "scale".</p> </td> 
     </tr> 
    </tbody> 
   </table> 
  </div> 
  <div></div> 
  <div> 
   <a id="execute"></a> 
   <h3>Operation</h3> 
   <pre><a title="function: CheckFPEnabled64()" class="document-topic">CheckFPEnabled64</a>();

<a title="type FPCRType" class="document-topic">FPCRType</a> fpcr = FPCR[];
boolean merge = <a title="function: boolean IsMerging(FPCRType fpcr)" class="document-topic">IsMerging</a>(fpcr);
integer fsize = if op == <a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp_CVT_ItoF</a> &amp;&amp; merge then 128 else fltsize;
bits(fsize) fltval;
bits(intsize) intval;

case op of
    when <a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp_CVT_FtoI</a>
        fltval = <a title="accessor: bits(width) V[integer n, integer width]" class="document-topic">V</a>[n, fsize];
        intval = <a title="function: bits(M) FPToFixed(bits(N) op, integer fbits, boolean unsigned, FPCRType fpcr, FPRounding rounding, integer M)" class="document-topic">FPToFixed</a>(fltval, fracbits, unsigned, fpcr, rounding, intsize);
        <a title="accessor: X[integer n, integer width] = bits(width) value" class="document-topic">X</a>[d, intsize] = intval;
    when <a title="enumeration FPConvOp    {FPConvOp_CVT_FtoI, FPConvOp_CVT_ItoF, FPConvOp_MOV_FtoI, FPConvOp_MOV_ItoF , FPConvOp_CVT_FtoI_JS }" class="document-topic">FPConvOp_CVT_ItoF</a>
        intval = <a title="accessor: bits(width) X[integer n, integer width]" class="document-topic">X</a>[n, intsize];
        fltval = if merge then <a title="accessor: bits(width) V[integer n, integer width]" class="document-topic">V</a>[d, fsize] else <a title="function: bits(N) Zeros(integer N)" class="document-topic">Zeros</a>(fsize);
        <a title="accessor: Elem[bits(N) &amp;vector, integer e, integer size] = bits(size) value" class="document-topic">Elem</a>[fltval, 0, fltsize] = <a title="function: bits(N) FixedToFP(bits(M) op, integer fbits, boolean unsigned, FPCRType fpcr, FPRounding rounding, integer N)" class="document-topic">FixedToFP</a>(intval, fracbits, unsigned, fpcr, rounding, fltsize);
        <a title="accessor: V[integer n, integer width] = bits(width) value" class="document-topic">V</a>[d, fsize] = fltval;</pre> 
  </div>  
 </body>
</html>